# What's New Changelog Popup

| Field        | Value                                       |
| ------------ | ------------------------------------------- |
| **Status**   | Backlog                                     |
| **Authors**  | Claude (AI Assistant)                       |
| **Created**  | 2025-12-10                                  |
| **Updated**  | 2025-12-10                                  |
| **Priority** | Medium                                      |
| **Type**     | Feature                                     |

---

## Overview

Display a "What's New" popup to users after login showing user-friendly descriptions of new features and changes since their last visit. Content is automatically generated from changelog entries using Claude in GitHub Actions, stored in Supabase, and displayed based on version tracking.

### Current State

- `CHANGELOG.md` auto-generated by release-please with concise commit-style entries
- Version (`__APP_VERSION__`) displayed in Settings page footer
- No mechanism to show users what changed between versions
- No tracking of which version a user last saw

### Desired State

- User-friendly announcements generated automatically on each release
- Announcements stored in Supabase for querying
- Users see a modal on login with features they haven't seen
- Same content powers a `/changelog` page and potential help/FAQ sections
- Existing users start with a clean slate (no backlog of old announcements)

---

## Architecture

```
┌─────────────────┐     ┌──────────────────┐     ┌─────────────────┐
│ release-please  │────▶│  Claude Action   │────▶│    Supabase     │
│ creates release │     │  generates copy  │     │  announcements  │
└─────────────────┘     └──────────────────┘     └─────────────────┘
                                                          │
                                                          ▼
                                                 ┌─────────────────┐
                                                 │   React App     │
                                                 │  WhatsNewModal  │
                                                 └─────────────────┘
```

### Dual Changelog System

| Source | Format | Audience | Example |
|--------|--------|----------|---------|
| `CHANGELOG.md` | Commit-style | Developers | `feat(practice): add status field` |
| `announcements` table | Marketing-style | End users | "Track Your Practice Like a Pro!" |

---

## Scope

| Component | Changes |
| --------- | ------- |
| `.github/workflows/generate-announcement.yml` | New workflow triggered on release |
| `supabase/migrations/xxx_announcements.sql` | New tables for announcements and seen tracking |
| `supabase/migrations/xxx_backfill_announcements.sql` | One-time backfill of existing versions |
| `supabase/migrations/xxx_init_user_versions.sql` | Initialize existing users' last_seen_version |
| `src/components/ui/WhatsNewModal.tsx` | New modal component |
| `src/hooks/useWhatsNew.ts` | Hook to fetch unseen announcements |
| `src/App.tsx` | Integration point after auth |
| `src/pages/Changelog.tsx` | Optional public changelog page |

---

## Phase 1: Infrastructure & Schema

### 1.1 Supabase Schema

**File:** `supabase/migrations/xxx_announcements.sql`

```sql
-- Announcements table - stores user-friendly release notes
CREATE TABLE announcements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  version TEXT NOT NULL UNIQUE,
  released_at DATE NOT NULL,
  title TEXT NOT NULL,
  summary TEXT NOT NULL,
  importance TEXT NOT NULL CHECK (importance IN ('major', 'minor', 'patch')),
  features JSONB NOT NULL DEFAULT '[]',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Index for version comparisons
CREATE INDEX idx_announcements_version ON announcements(version);
CREATE INDEX idx_announcements_released_at ON announcements(released_at DESC);

-- RLS: All authenticated users can read announcements
ALTER TABLE announcements ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Announcements readable by authenticated users"
  ON announcements FOR SELECT TO authenticated USING (true);

-- Track which versions each user has seen
CREATE TABLE user_seen_versions (
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE PRIMARY KEY,
  last_seen_version TEXT NOT NULL DEFAULT '0.0.0',
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

ALTER TABLE user_seen_versions ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users manage their own seen version"
  ON user_seen_versions FOR ALL TO authenticated
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

-- Function to compare semver strings (returns true if v1 > v2)
CREATE OR REPLACE FUNCTION semver_gt(v1 TEXT, v2 TEXT)
RETURNS BOOLEAN AS $$
DECLARE
  v1_parts INTEGER[];
  v2_parts INTEGER[];
BEGIN
  -- Parse version strings like "0.1.10" into integer arrays
  v1_parts := string_to_array(v1, '.')::INTEGER[];
  v2_parts := string_to_array(v2, '.')::INTEGER[];

  -- Compare major, minor, patch
  RETURN (v1_parts[1] > v2_parts[1]) OR
         (v1_parts[1] = v2_parts[1] AND v1_parts[2] > v2_parts[2]) OR
         (v1_parts[1] = v2_parts[1] AND v1_parts[2] = v2_parts[2] AND v1_parts[3] > v2_parts[3]);
END;
$$ LANGUAGE plpgsql IMMUTABLE;
```

### 1.2 Features JSON Schema

```typescript
interface Announcement {
  id: string;
  version: string;           // "0.1.10"
  released_at: string;       // "2025-12-10"
  title: string;             // "Practice Tracking Just Got Smarter"
  summary: string;           // 1-2 sentence teaser
  importance: 'major' | 'minor' | 'patch';
  features: {
    headline: string;        // "Rate Your Confidence"
    description: string;     // How to use it, benefits
    category: 'feature' | 'improvement' | 'fix';
  }[];
  created_at: string;
}
```

---

## Phase 2: GitHub Actions Workflow

### 2.1 Announcement Generation Workflow

**File:** `.github/workflows/generate-announcement.yml`

```yaml
name: Generate User Announcement

on:
  release:
    types: [published]

jobs:
  generate-announcement:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      id-token: write  # Required for OAuth

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Extract changelog for this version
        id: changelog
        run: |
          VERSION="${{ github.event.release.tag_name }}"
          VERSION_NUM="${VERSION#v}"

          # Extract section for this version from CHANGELOG.md
          CONTENT=$(awk "/^## \[${VERSION_NUM}\]/,/^## \[/" CHANGELOG.md | head -n -1)

          # Write to file to avoid shell escaping issues
          echo "$CONTENT" > changelog_excerpt.txt
          echo "version=${VERSION_NUM}" >> $GITHUB_OUTPUT

      - name: Generate user-friendly announcement
        uses: anthropics/claude-code-action@v1
        with:
          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          prompt: |
            VERSION: ${{ steps.changelog.outputs.version }}
            RELEASE_DATE: ${{ github.event.release.published_at }}

            Read the file changelog_excerpt.txt for the technical changelog content.

            Transform this technical changelog into an exciting user-facing announcement
            for a band management app used by musicians.

            Output ONLY valid JSON (no markdown fences, no explanation) matching this schema:
            {
              "version": "x.y.z",
              "released_at": "YYYY-MM-DD",
              "title": "Catchy 5-8 word headline",
              "summary": "1-2 sentence teaser focusing on user benefits",
              "importance": "major|minor|patch",
              "features": [
                {
                  "headline": "Benefit-focused headline",
                  "description": "How this helps musicians and how to try it",
                  "category": "feature|improvement|fix"
                }
              ]
            }

            Guidelines:
            - Write for musicians, not developers
            - Focus on BENEFITS not implementation details
            - Use active, exciting language
            - importance: major = new capabilities, minor = enhancements, patch = fixes only
            - Omit purely technical changes (CI, build, deps, refactoring)
            - Include "how to find/use it" for each feature
            - If only technical changes, set features to empty array and title to "Bug Fixes & Improvements"

            Write the JSON to announcement.json using your Write tool.

          claude_args: '--model claude-opus-4-5-20251101 --max-turns 5'

      - name: Store announcement in Supabase
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
        run: |
          if [ -f announcement.json ]; then
            # Validate JSON
            if jq empty announcement.json 2>/dev/null; then
              curl -X POST "${SUPABASE_URL}/rest/v1/announcements" \
                -H "apikey: ${SUPABASE_SERVICE_ROLE_KEY}" \
                -H "Authorization: Bearer ${SUPABASE_SERVICE_ROLE_KEY}" \
                -H "Content-Type: application/json" \
                -H "Prefer: return=minimal" \
                -d @announcement.json
              echo "✅ Announcement stored in Supabase"
            else
              echo "❌ Invalid JSON in announcement.json"
              cat announcement.json
              exit 1
            fi
          else
            echo "⚠️ No announcement.json generated"
            exit 1
          fi
```

### 2.2 Required Secrets

| Secret | Purpose | How to Obtain |
|--------|---------|---------------|
| `CLAUDE_CODE_OAUTH_TOKEN` | Already exists | Used by existing Claude workflows |
| `SUPABASE_SERVICE_ROLE_KEY` | Write to announcements table | Supabase Dashboard → Settings → API |

---

## Phase 3: Backfill Strategy

### 3.1 Approach: Selective Backfill

Rather than backfilling all 10 versions, we'll backfill only **significant releases** (versions with notable user-facing features). This provides context for the changelog page without overwhelming the popup.

**Versions to backfill:**

| Version | Key Features | Backfill? |
|---------|--------------|-----------|
| 0.1.1 | Supabase integration, AlphaTab player, auth flow | ✅ Yes (foundation) |
| 0.1.2 | PDF viewer Firefox fix | ❌ No (bug fix) |
| 0.1.3 | User-member linking Phase 1 | ✅ Yes (new feature) |
| 0.1.4 | RLS policy fix, PDF token fix | ❌ No (bug fixes) |
| 0.1.5 | Practice tracking Phase 2 | ✅ Yes (major feature) |
| 0.1.6 | Song file naming | ❌ No (small enhancement) |
| 0.1.7 | Practice date selection/editing | ✅ Yes (enhancement) |
| 0.1.8 | Band selector, practice status field | ✅ Yes (features) |
| 0.1.9 | Band management UI | ✅ Yes (feature) |
| 0.1.10 | User-member linking Phase 3, practice virtualization | ✅ Yes (features) |

### 3.2 Backfill Migration

**File:** `supabase/migrations/xxx_backfill_announcements.sql`

```sql
-- Backfill announcements for key versions
-- These are manually curated user-friendly descriptions

INSERT INTO announcements (version, released_at, title, summary, importance, features) VALUES

-- 0.1.1 - Foundation release
('0.1.1', '2025-12-04',
 'Welcome to Band Assist!',
 'Your new home for managing songs, setlists, and practice sessions. Cloud sync keeps everything safe.',
 'major',
 '[
   {"headline": "Cloud-Synced Song Library", "description": "All your songs, charts, and setlists sync automatically across devices. Access from anywhere.", "category": "feature"},
   {"headline": "Guitar Pro Playback", "description": "Load .gp files and play along with adjustable tempo, track muting, and more.", "category": "feature"},
   {"headline": "Secure Authentication", "description": "Sign up with email to keep your data private and synced.", "category": "feature"}
 ]'::jsonb),

-- 0.1.3 - User-member linking foundation
('0.1.3', '2025-12-05',
 'Connect Your Identity',
 'Link your account to your band member profile and unlock personalized features.',
 'minor',
 '[
   {"headline": "Claim Your Member Profile", "description": "Go to Settings → Team tab and link your account to your band member. This enables personal practice tracking.", "category": "feature"}
 ]'::jsonb),

-- 0.1.5 - Practice tracking
('0.1.5', '2025-12-07',
 'Track Your Practice Sessions',
 'Log your practice sessions and build a history of your progress over time.',
 'major',
 '[
   {"headline": "Personal Practice Log", "description": "After practicing a song, tap the music note icon to log your session. Track your growth!", "category": "feature"},
   {"headline": "Practice History", "description": "View all your past practice sessions from My Practice in the sidebar.", "category": "feature"}
 ]'::jsonb),

-- 0.1.7 - Practice enhancements
('0.1.7', '2025-12-08',
 'More Control Over Practice Logs',
 'Edit past sessions and pick the date when logging practice.',
 'minor',
 '[
   {"headline": "Backdate Your Practice", "description": "Forgot to log yesterday? Now you can select the date when adding a practice session.", "category": "improvement"},
   {"headline": "Edit Past Sessions", "description": "Made a mistake? Click any practice entry to edit the details.", "category": "improvement"}
 ]'::jsonb),

-- 0.1.8 - Band selector & status
('0.1.8', '2025-12-09',
 'Multi-Band Support & Practice Status',
 'Easily switch between bands and rate your confidence on each song.',
 'minor',
 '[
   {"headline": "Band Switcher", "description": "Part of multiple bands? Use the band selector in the header to switch contexts instantly.", "category": "feature"},
   {"headline": "Rate Your Confidence", "description": "When logging practice, mark songs as Needs Work, Getting There, or Show Ready.", "category": "feature"}
 ]'::jsonb),

-- 0.1.9 - Band management
('0.1.9', '2025-12-10',
 'Manage Your Bands',
 'Full control over your bands with new management tools.',
 'minor',
 '[
   {"headline": "Band Settings", "description": "Rename your band, manage members, or even delete a band from Settings → Band tab.", "category": "feature"}
 ]'::jsonb),

-- 0.1.10 - Latest
('0.1.10', '2025-12-10',
 'Practice History Gets Smarter',
 'Better performance for large practice histories and refined design.',
 'minor',
 '[
   {"headline": "Faster Practice History", "description": "Large practice histories now load smoothly with virtualized scrolling.", "category": "improvement"},
   {"headline": "Polished Design", "description": "Practice History now matches the app design system for a more cohesive look.", "category": "improvement"}
 ]'::jsonb)

ON CONFLICT (version) DO NOTHING;
```

### 3.3 Initialize Existing Users' Last Seen Version

**Strategy:** Set all existing users to the current version at migration time so they don't see a flood of old announcements. New users will start at '0.0.0' and see announcements as they're released.

**File:** `supabase/migrations/xxx_init_user_versions.sql`

```sql
-- Initialize existing users to current version
-- This prevents showing them all historical announcements
-- Run this AFTER the backfill migration

-- Get the latest version from announcements (or hardcode current version)
DO $$
DECLARE
  current_ver TEXT := '0.1.10';  -- Update this to match deployment version
BEGIN
  -- Insert a record for each existing user
  INSERT INTO user_seen_versions (user_id, last_seen_version, updated_at)
  SELECT
    id,
    current_ver,
    NOW()
  FROM auth.users
  ON CONFLICT (user_id) DO NOTHING;

  RAISE NOTICE 'Initialized % users to version %',
    (SELECT COUNT(*) FROM user_seen_versions), current_ver;
END $$;

-- Create trigger to auto-initialize new users to '0.0.0'
CREATE OR REPLACE FUNCTION init_user_seen_version()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO user_seen_versions (user_id, last_seen_version)
  VALUES (NEW.id, '0.0.0')
  ON CONFLICT (user_id) DO NOTHING;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_auth_user_created_init_version
  AFTER INSERT ON auth.users
  FOR EACH ROW
  EXECUTE FUNCTION init_user_seen_version();
```

---

## Phase 4: Frontend Implementation

### 4.1 Types

**File:** `src/types/announcement.ts`

```typescript
export interface AnnouncementFeature {
  headline: string;
  description: string;
  category: 'feature' | 'improvement' | 'fix';
}

export interface Announcement {
  id: string;
  version: string;
  released_at: string;
  title: string;
  summary: string;
  importance: 'major' | 'minor' | 'patch';
  features: AnnouncementFeature[];
  created_at: string;
}
```

### 4.2 Hook: useWhatsNew

**File:** `src/hooks/useWhatsNew.ts`

```typescript
import { useEffect, useState } from 'react';
import { supabase } from '@/lib/supabase';
import type { Announcement } from '@/types/announcement';

export function useWhatsNew(userId: string | undefined) {
  const [announcements, setAnnouncements] = useState<Announcement[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!userId) {
      setLoading(false);
      return;
    }

    async function checkAnnouncements() {
      try {
        // Get user's last seen version
        const { data: userVersion } = await supabase
          .from('user_seen_versions')
          .select('last_seen_version')
          .eq('user_id', userId)
          .single();

        const lastSeen = userVersion?.last_seen_version || '0.0.0';

        // Get announcements newer than last seen version
        // Using the semver_gt function we created
        const { data: unseen } = await supabase
          .from('announcements')
          .select('*')
          .order('released_at', { ascending: false });

        // Filter client-side using semver comparison
        // (Could also use RPC call to semver_gt if preferred)
        const newer = (unseen || []).filter(a =>
          compareSemver(a.version, lastSeen) > 0
        );

        setAnnouncements(newer);
      } catch (error) {
        console.error('Failed to check announcements:', error);
      } finally {
        setLoading(false);
      }
    }

    checkAnnouncements();
  }, [userId]);

  const markAllSeen = async () => {
    if (!userId || announcements.length === 0) return;

    // Get the highest version from announcements
    const latestVersion = announcements.reduce((max, a) =>
      compareSemver(a.version, max) > 0 ? a.version : max
    , '0.0.0');

    await supabase
      .from('user_seen_versions')
      .upsert({
        user_id: userId,
        last_seen_version: latestVersion,
        updated_at: new Date().toISOString()
      });

    setAnnouncements([]);
  };

  return { announcements, loading, markAllSeen };
}

// Simple semver comparison: returns 1 if a > b, -1 if a < b, 0 if equal
function compareSemver(a: string, b: string): number {
  const pa = a.split('.').map(Number);
  const pb = b.split('.').map(Number);

  for (let i = 0; i < 3; i++) {
    if (pa[i] > pb[i]) return 1;
    if (pa[i] < pb[i]) return -1;
  }
  return 0;
}
```

### 4.3 Component: WhatsNewModal

**File:** `src/components/ui/WhatsNewModal.tsx`

```tsx
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogFooter,
} from '@/components/primitives/dialog';
import { Button } from '@/components/primitives/button';
import { Badge } from '@/components/primitives/badge';
import { Sparkles, Wrench, Bug, ChevronLeft, ChevronRight } from 'lucide-react';
import { useState } from 'react';
import type { Announcement, AnnouncementFeature } from '@/types/announcement';

interface WhatsNewModalProps {
  announcements: Announcement[];
  onDismiss: () => void;
}

const categoryIcons = {
  feature: Sparkles,
  improvement: Wrench,
  fix: Bug,
};

const importanceColors = {
  major: 'bg-amber-500/20 text-amber-400 border-amber-500/30',
  minor: 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  patch: 'bg-gray-500/20 text-gray-400 border-gray-500/30',
};

export function WhatsNewModal({ announcements, onDismiss }: WhatsNewModalProps) {
  const [currentIndex, setCurrentIndex] = useState(0);

  if (announcements.length === 0) return null;

  const current = announcements[currentIndex];
  const hasMultiple = announcements.length > 1;

  return (
    <Dialog open onOpenChange={() => onDismiss()}>
      <DialogContent className="max-w-lg">
        <DialogHeader>
          <div className="flex items-center gap-2 mb-1">
            <Badge variant="outline" className={importanceColors[current.importance]}>
              v{current.version}
            </Badge>
            <span className="text-xs text-muted-foreground">
              {new Date(current.released_at).toLocaleDateString()}
            </span>
          </div>
          <DialogTitle className="text-xl">{current.title}</DialogTitle>
          <p className="text-sm text-muted-foreground">{current.summary}</p>
        </DialogHeader>

        <div className="space-y-3 my-4 max-h-[300px] overflow-y-auto">
          {current.features.map((feature, i) => (
            <FeatureCard key={i} feature={feature} />
          ))}
          {current.features.length === 0 && (
            <p className="text-sm text-muted-foreground italic">
              This release includes technical improvements and bug fixes.
            </p>
          )}
        </div>

        <DialogFooter className="flex-col sm:flex-row gap-2">
          {hasMultiple && (
            <div className="flex items-center gap-2 mr-auto">
              <Button
                variant="ghost"
                size="icon"
                onClick={() => setCurrentIndex(i => i - 1)}
                disabled={currentIndex === 0}
              >
                <ChevronLeft className="h-4 w-4" />
              </Button>
              <span className="text-sm text-muted-foreground">
                {currentIndex + 1} of {announcements.length}
              </span>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => setCurrentIndex(i => i + 1)}
                disabled={currentIndex === announcements.length - 1}
              >
                <ChevronRight className="h-4 w-4" />
              </Button>
            </div>
          )}
          <Button onClick={onDismiss}>
            {hasMultiple ? 'Got it!' : "Let's go!"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}

function FeatureCard({ feature }: { feature: AnnouncementFeature }) {
  const Icon = categoryIcons[feature.category];

  return (
    <div className="flex gap-3 p-3 rounded-lg bg-muted/50">
      <div className="mt-0.5">
        <Icon className="h-4 w-4 text-amber-400" />
      </div>
      <div>
        <h4 className="font-medium text-sm">{feature.headline}</h4>
        <p className="text-xs text-muted-foreground mt-1">{feature.description}</p>
      </div>
    </div>
  );
}
```

### 4.4 Integration in App.tsx

```tsx
// In App.tsx, after session is confirmed and bands loaded

const { announcements, markAllSeen } = useWhatsNew(session?.user?.id);
const [showWhatsNew, setShowWhatsNew] = useState(false);

// Show modal after initial load completes
useEffect(() => {
  if (announcements.length > 0 && !loadingBands) {
    setShowWhatsNew(true);
  }
}, [announcements, loadingBands]);

// In render:
{showWhatsNew && (
  <WhatsNewModal
    announcements={announcements}
    onDismiss={() => {
      markAllSeen();
      setShowWhatsNew(false);
    }}
  />
)}
```

---

## Phase 5: Optional - Changelog Page

### 5.1 Public Changelog Route

**File:** `src/pages/Changelog.tsx`

A dedicated page showing all announcements in timeline format, accessible from Settings footer: `Band Assist v0.1.10 - View changelog`

This reuses the same `announcements` table data in a different presentation.

---

## Testing Plan

### Unit Tests

1. `compareSemver` function - verify correct version ordering
2. `useWhatsNew` hook - mock Supabase responses, verify filtering

### Integration Tests

1. New user signup → verify `user_seen_versions` record created with '0.0.0'
2. User with unseen announcements → verify modal appears
3. User dismisses modal → verify `last_seen_version` updated
4. User with no unseen announcements → verify no modal

### Manual Testing

1. Create a release → verify workflow generates announcement
2. Verify announcement stored in Supabase
3. Log in as user who hasn't seen latest → verify modal appears
4. Log in again → verify modal doesn't appear
5. Test pagination with multiple unseen announcements

---

## Migration Checklist

### Before Deployment

- [ ] Add `SUPABASE_SERVICE_ROLE_KEY` to GitHub repository secrets
- [ ] Run schema migration (creates tables)
- [ ] Run backfill migration (populates historical announcements)
- [ ] Run init migration (sets existing users to current version)

### After Deployment

- [ ] Verify workflow triggers on next release
- [ ] Monitor announcement generation logs
- [ ] Verify new users see announcements, existing users don't

---

## Risks & Mitigations

| Risk | Mitigation |
|------|------------|
| Claude generates invalid JSON | Validate JSON before Supabase insert, fail workflow on error |
| Workflow fails silently | Add error handling and notifications |
| Users overwhelmed by many announcements | Pagination in modal, limit to last 3-5 versions |
| Service role key exposure | Key only used in CI, never in client code |
| Announcement content inappropriate | Review generated content in CI logs, can manually override |

---

## Future Enhancements

- **Email digest**: Weekly/monthly email with recent announcements
- **In-app help**: Surface relevant features based on current page
- **Analytics**: Track which announcements users engage with
- **A/B testing**: Test different announcement copy
- **Localization**: Translate announcements for i18n

---

## Success Criteria

- [ ] GitHub Action generates announcements on each release
- [ ] Announcements stored in Supabase with correct schema
- [ ] New users see announcements after signup
- [ ] Existing users start with clean slate (no historical backlog in popup)
- [ ] Modal displays with pagination for multiple announcements
- [ ] Dismissing modal updates user's last_seen_version
- [ ] Changelog page shows full history (optional)
